---
title: 'Next å­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰ï¼šNext.js æ ·å¼æ–¹æ¡ˆ'
date: '2025-04-07'
overview: 'åœ¨åƒ Next.js è¿™æ ·çš„ç»„ä»¶åŒ–æ¡†æ¶ä¸­ï¼Œæ ·å¼æ–¹æ¡ˆçš„é€‰æ‹©æ ¸å¿ƒæ˜¯å¹³è¡¡å…¨å±€ä¸€è‡´æ€§ä¸ç»„ä»¶çº§å°è£…ã€‚æœ¬é¡¹ç›®ä¸­ä¸»è¦ä½¿ç”¨äº†ä¸¤ç§ä¸»æµæ–¹æ¡ˆï¼šTailwind CSS ä½œä¸ºä¸»è¦çš„å·¥å…·ç±»æ¡†æ¶ï¼ŒCSS Modules ä½œä¸ºç‰¹å®šåœºæ™¯ä¸‹çš„è¡¥å……ã€‚'
tags: 'Next,Tailwind'
slug: 'Study-Next-05'
---
## Tailwind CSS - Utility-First çš„æ•ˆç‡

- **æ ¸å¿ƒæ€æƒ³ï¼š** å‘Šåˆ«ä¼ ç»Ÿçš„æ‰‹å†™ CSS æ–‡ä»¶ï¼Œç›´æ¥åœ¨ JSX ä¸­é€šè¿‡åŸå­åŒ–çš„å·¥å…·ç±»ï¼ˆutility classesï¼‰æ¥æ„å»º UIã€‚ä¾‹å¦‚ï¼Œä¸ç”¨å†™ `color: red;`ï¼Œè€Œæ˜¯ç›´æ¥ç”¨ `className="text-red-500"`ã€‚è¿™ç§æ–¹å¼éå¸¸é€‚åˆå¿«é€Ÿå¼€å‘ï¼Œä¸”èƒ½é€šè¿‡é…ç½®æ–‡ä»¶è½»æ¾ä¿æŒè®¾è®¡ç³»ç»Ÿçš„ä¸€è‡´æ€§ã€‚

- **å‘ç‚¹ï¼šå†—é•¿çš„ `className`** å½“ä¸€ä¸ªå…ƒç´ çš„æ ·å¼å¾ˆå¤æ‚ï¼Œæˆ–è€…éœ€è¦æ ¹æ®çŠ¶æ€åŠ¨æ€åˆ‡æ¢æ ·å¼æ—¶ï¼Œ`className` å­—ç¬¦ä¸²ä¼šå˜å¾—éå¸¸é•¿ï¼Œéš¾ä»¥é˜…è¯»å’Œç»´æŠ¤ã€‚

  ```tsx
  // é—®é¢˜ç¤ºä¾‹ï¼šéš¾ä»¥é˜…è¯»çš„æ¡ä»¶æ ·å¼
  function Alert({ type, children }) {
    const baseClasses = 'p-4 rounded-md border';
    const typeClasses = type === 'success' 
      ? 'bg-green-100 border-green-400 text-green-700' 
      : 'bg-red-100 border-red-400 text-red-700';
  
    return <div className={`${baseClasses} ${typeClasses}`}>{children}</div>
  }
  ```

- **ä¾¿æ·æŠ€å·§ï¼šä½¿ç”¨ `clsx` (æˆ–ç±»ä¼¼åº“) åˆå¹¶ç±»å** è™½ç„¶æœ¬é¡¹ç›®æ²¡æœ‰å®‰è£…ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¼ºçƒˆæ¨èä½¿ç”¨åƒ `clsx` æˆ– `classnames` è¿™æ ·çš„åº“æ¥ä¼˜é›…åœ°å¤„ç†æ¡ä»¶ç±»åã€‚

  ```tsx
  // éœ€è¦å…ˆå®‰è£…ï¼šnpm install clsx
  import clsx from 'clsx';
  
  function Alert({ type, children }) {
    const alertClasses = clsx(
      'p-4', 
      'rounded-md', 
      'border',
      {
        'bg-green-100 border-green-400 text-green-700': type === 'success',
        'bg-red-100 border-red-400 text-red-700': type === 'error',
      }
    );
  
    return <div className={alertClasses}>{children}</div>;
  }
  ```

  è¿™æ ·ä»£ç çš„æ„å›¾å’Œç»“æ„éƒ½æ¸…æ™°å¤šäº†ã€‚

- **é«˜çº§ç”¨æ³•ï¼šä½¿ç”¨ `@apply` æå–ç»„ä»¶ç±»** å¦‚æœæŸä¸ªç»„ä»¶çš„æ ·å¼ç»„åˆéå¸¸å¤æ‚ä¸”è¢«é«˜é¢‘å¤ç”¨ï¼Œå¯ä»¥è€ƒè™‘åœ¨ CSS æ–‡ä»¶ä¸­ä½¿ç”¨ `@apply` æŒ‡ä»¤ï¼Œå°†ä¸€ç³»åˆ—å·¥å…·ç±»ç»„åˆæˆä¸€ä¸ªè‡ªå®šä¹‰çš„è¯­ä¹‰åŒ–ç±»ã€‚

  ```css
  /* åœ¨ globals.css æˆ–å…¶ä»– CSS æ–‡ä»¶ä¸­ */
  .btn-primary {
    @apply px-4 py-2 bg-accent text-white font-semibold rounded-lg shadow-md;
    @apply hover:bg-opacity-80 transition-colors duration-300;
  }
  
  /* åœ¨ JSX ä¸­ä½¿ç”¨ */
  <button className="btn-primary">Click Me</button>
  ```

  **æ³¨æ„ï¼š** ä¸è¦æ»¥ç”¨ `@apply`ã€‚è¿‡åº¦ä½¿ç”¨å®ƒä¼šè®©ä½ å›åˆ°ä¼ ç»Ÿ CSS çš„è€è·¯ï¼Œå¤±å»å·¥å…·ç±»å¸¦æ¥çš„çµæ´»æ€§ã€‚åªåœ¨ç¡®å®éœ€è¦å°è£…å¯å¤ç”¨ç»„ä»¶æ—¶æ‰è€ƒè™‘ä½¿ç”¨ã€‚

## å…¨å±€æ ·å¼ä¸ CSS å˜é‡

- **æ ¸å¿ƒæ€æƒ³ï¼š** ä¸€äº›åŸºç¡€æ ·å¼å¿…é¡»æ˜¯å…¨å±€çš„ï¼Œä¾‹å¦‚ `body` çš„å­—ä½“å’ŒèƒŒæ™¯è‰²ã€CSS Resetã€ä»¥åŠ**ä¸»é¢˜é¢œè‰²**ã€‚è¿™äº›éƒ½åº”è¯¥æ”¾åœ¨ `src/style/globals.css` ä¸­ã€‚

- **æœ€ä½³å®è·µï¼šé€šè¿‡ CSS å˜é‡å®ç°ä¸»é¢˜åŒ–** æœ¬é¡¹ç›®çš„åšæ³•æ˜¯æ­£ç¡®çš„å…¸èŒƒã€‚é€šè¿‡åœ¨ `tailwind.css` ä¸­ä¸ºä¸åŒçš„ `[data-theme]` å±æ€§å®šä¹‰ CSS å˜é‡ï¼Œå¯ä»¥å®ç°é«˜æ•ˆã€çµæ´»çš„ä¸»é¢˜åˆ‡æ¢ã€‚

  ```css
  /* src/style/tailwind.css */
  :root {
    --accent-color: #ff5671;
  }
  
  [data-theme='light'] {
    --body-bg-color: #f5f5fa;
    --body-color: #474c5d;
  }
  [data-theme='dark'] {
    --body-bg-color: #1f2328;
    --body-color: #e3e7ed;
  }
  ```

  ç„¶ååœ¨ `globals.css` ä¸­åº”ç”¨è¿™äº›å˜é‡ï¼š

  ```css
  /* src/style/globals.css */
  body {
    background: var(--body-bg-color);
    color: var(--body-color);
  }
  ```

  åœ¨ç»„ä»¶ä¸­ï¼Œç”šè‡³å¯ä»¥ç»“åˆ Tailwind çš„ä»»æ„å€¼ç‰¹æ€§æ¥ä½¿ç”¨è¿™äº›å˜é‡ï¼š

  ```tsx
  <h1 className="text-[color:var(--accent-color)]">
    This title uses the accent color.
  </h1>
  ```

## CSS Modules - ç»„ä»¶çº§æ ·å¼éš”ç¦»

- **æ ¸å¿ƒæ€æƒ³ï¼š** å½“ä¸€æ®µ CSS åªæœåŠ¡äº**æŸä¸€ä¸ªç»„ä»¶**ï¼Œå¹¶ä¸”ä¸å¸Œæœ›å®ƒçš„ç±»åæ±¡æŸ“åˆ°å…¨å±€æ—¶ï¼Œä½¿ç”¨ CSS Modules æ˜¯æœ€ä½³é€‰æ‹©ã€‚Next.js å¯¹å…¶æä¾›å¼€ç®±å³ç”¨çš„æ”¯æŒã€‚

- **ä½¿ç”¨æ–¹æ³•ï¼š** å°†æ ·å¼æ–‡ä»¶å‘½åä¸º `[ç»„ä»¶å].module.css`ã€‚åœ¨ç»„ä»¶ä¸­å¯¼å…¥è¿™ä¸ªæ–‡ä»¶ï¼ŒNext.js ä¼šåœ¨æ„å»ºæ—¶è‡ªåŠ¨ä¸ºæ–‡ä»¶ä¸­çš„æ‰€æœ‰ç±»åç”Ÿæˆä¸€ä¸ªå…¨å±€å”¯ä¸€çš„å“ˆå¸Œå€¼ã€‚

- **ç¤ºä¾‹ï¼ˆå‚è€ƒæœ¬é¡¹ç›®çš„ Header ç»„ä»¶ï¼‰ï¼š**

  ```tsx
  /* Header.module.css */
  .wrapper {
    /* ...ä¸€äº›å¤æ‚çš„æ ·å¼... */
  }
  .hamburger span:hover {
    /* ...ä¸€äº›å¤æ‚çš„ä¼ªç±»æˆ–åµŒå¥—æ ·å¼... */
  }
  
  /* Header.tsx */
  import styles from './Header.module.css';
  
  function Header() {
    // æœ€ç»ˆæ¸²æŸ“çš„ class ä¼šæ˜¯ "Header_wrapper__aB3xY" ä¹‹ç±»çš„å”¯ä¸€å€¼
    return (
      <header className={styles.wrapper}> 
        ...
      </header>
    )
  }
  ```

- **ä½¿ç”¨æ—¶æœºï¼š** å½“ä¸€ä¸ªç»„ä»¶æœ‰éå¸¸å¤æ‚ã€ç‹¬ç‰¹çš„æ ·å¼é€»è¾‘ï¼Œå°¤å…¶æ˜¯åŒ…å«**åŠ¨ç”»ã€ä¼ªç±»ã€æˆ–å¤šå±‚åµŒå¥—**ï¼Œç”¨ Tailwind å·¥å…·ç±»å†™èµ·æ¥éå¸¸ç¹çæ—¶ï¼Œå°±æ˜¯ä½¿ç”¨ CSS Modules çš„æœ€ä½³æ—¶æœºã€‚

## ğŸ¨ Tailwind CSS è¿›é˜¶æŠ€å·§

### å“åº”å¼è®¾è®¡æœ€ä½³å®è·µ
```tsx
// ç§»åŠ¨ä¼˜å…ˆçš„å“åº”å¼è®¾è®¡
function ResponsiveCard() {
  return (
    <div className={`
      w-full          // é»˜è®¤å…¨å®½
      p-4             // é»˜è®¤å†…è¾¹è·
      sm:w-1/2        // å°å±å¹•æ—¶å ä¸€åŠ
      md:w-1/3        // ä¸­å±å¹•æ—¶å ä¸‰åˆ†ä¹‹ä¸€
      lg:w-1/4        // å¤§å±å¹•æ—¶å å››åˆ†ä¹‹ä¸€
      sm:p-6          // å°å±å¹•æ—¶å¢åŠ å†…è¾¹è·
      lg:p-8          // å¤§å±å¹•æ—¶å†å¢åŠ å†…è¾¹è·
    `}>
      å“åº”å¼å†…å®¹
    </div>
  );
}

// å¤æ‚å¸ƒå±€çš„å“åº”å¼ç¤ºä¾‹
function ResponsiveLayout() {
  return (
    <div className="
      flex flex-col       // é»˜è®¤å‚ç›´å¸ƒå±€
      gap-4              // å…ƒç´ é—´è·
      md:flex-row        // ä¸­å±å¹•æ—¶æ”¹ä¸ºæ°´å¹³å¸ƒå±€
      md:gap-8           // ä¸­å±å¹•æ—¶å¢åŠ é—´è·
      lg:max-w-6xl       // å¤§å±å¹•æ—¶é™åˆ¶æœ€å¤§å®½åº¦
      lg:mx-auto         // å¤§å±å¹•æ—¶å±…ä¸­
    ">
      <main className="flex-1 md:order-2">ä¸»å†…å®¹</main>
      <aside className="w-full md:w-64 md:order-1">ä¾§è¾¹æ </aside>
    </div>
  );
}
```

### çŠ¶æ€å˜ä½“çš„é«˜çº§ç”¨æ³•
```tsx
function InteractiveButton() {
  return (
    <button className="
      px-6 py-3 
      bg-blue-500 text-white rounded-lg
      
      // æ‚¬åœçŠ¶æ€
      hover:bg-blue-600 
      hover:shadow-lg
      hover:scale-105
      
      // ç„¦ç‚¹çŠ¶æ€  
      focus:outline-none
      focus:ring-2
      focus:ring-blue-500
      focus:ring-offset-2
      
      // æ¿€æ´»çŠ¶æ€
      active:scale-95
      
      // ç¦ç”¨çŠ¶æ€
      disabled:opacity-50
      disabled:cursor-not-allowed
      disabled:hover:bg-blue-500
      disabled:hover:scale-100
      
      // è¿‡æ¸¡åŠ¨ç”»
      transition-all duration-200 ease-in-out
      
      // æ·±è‰²æ¨¡å¼æ”¯æŒ
      dark:bg-blue-600
      dark:hover:bg-blue-700
    ">
      äº¤äº’æŒ‰é’®
    </button>
  );
}
```

### è‡ªå®šä¹‰å·¥å…·ç±»
```css
/* globals.css æˆ–è‡ªå®šä¹‰ CSS æ–‡ä»¶ */
@layer utilities {
  .text-shadow {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }
  
  .bg-gradient-brand {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}
```

### ä½¿ç”¨ CSS Grid çš„å¤æ‚å¸ƒå±€
```tsx
function GridLayout() {
  return (
    <div className="
      grid 
      grid-cols-1        // é»˜è®¤å•åˆ—
      sm:grid-cols-2     // å°å±å¹•ä¸¤åˆ—
      lg:grid-cols-3     // å¤§å±å¹•ä¸‰åˆ—
      xl:grid-cols-4     // è¶…å¤§å±å¹•å››åˆ—
      gap-4 
      auto-rows-fr       // ç­‰é«˜è¡Œ
    ">
      <div className="col-span-full">é¡µå¤´ - å æ»¡æ•´è¡Œ</div>
      <div className="lg:col-span-2">ä¸»è¦å†…å®¹ - å¤§å±å¹•æ—¶å ä¸¤åˆ—</div>
      <div className="lg:col-span-1">ä¾§è¾¹æ </div>
      <div className="sm:col-span-2 lg:col-span-3">åº•éƒ¨ - å å¤šåˆ—</div>
    </div>
  );
}
```

## ğŸ› ï¸ å¼€å‘è°ƒè¯•å·¥å…·

### Tailwind CSS IntelliSense é…ç½®
```json
// .vscode/settings.json
{
  "tailwindCSS.includeLanguages": {
    "typescript": "javascript",
    "typescriptreact": "javascript"
  },
  "tailwindCSS.experimental.classRegex": [
    "cn\\(([^)]*)\\)",  // æ”¯æŒ cn() å‡½æ•°
    "clsx\\(([^)]*)\\)" // æ”¯æŒ clsx() å‡½æ•°
  ]
}
```

### æ ·å¼è°ƒè¯•æŠ€å·§
```tsx
// ä¸´æ—¶è¾¹æ¡†è°ƒè¯•
function DebugLayout() {
  const debug = process.env.NODE_ENV === 'development';
  
  return (
    <div className={`
      grid grid-cols-3 gap-4
      ${debug ? 'border border-red-500' : ''}
    `}>
      <div className={debug ? 'border border-blue-500' : ''}>
        Box 1
      </div>
      <div className={debug ? 'border border-blue-500' : ''}>
        Box 2  
      </div>
      <div className={debug ? 'border border-blue-500' : ''}>
        Box 3
      </div>
    </div>
  );
}
```

### ä¸»é¢˜åˆ‡æ¢è°ƒè¯•
```tsx
// ä¸»é¢˜é¢„è§ˆç»„ä»¶
function ThemePreview() {
  return (
    <div className="p-4 space-y-4">
      <div className="bg-background text-foreground p-4 rounded">
        èƒŒæ™¯è‰²å’Œå‰æ™¯è‰²
      </div>
      <div className="bg-primary text-primary-foreground p-4 rounded">
        ä¸»è¦è‰²å½©
      </div>
      <div className="bg-secondary text-secondary-foreground p-4 rounded">
        æ¬¡è¦è‰²å½©
      </div>
      <div className="bg-accent text-accent-foreground p-4 rounded">
        å¼ºè°ƒè‰²å½©
      </div>
    </div>
  );
}
```

## ğŸ“± ç§»åŠ¨ç«¯é€‚é…ç­–ç•¥

### å®‰å…¨åŒºåŸŸå¤„ç†
```css
/* å¤„ç† iPhone åˆ˜æµ·å±ç­‰ */
.safe-area-padding {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}
```

### è§¦æ‘¸å‹å¥½çš„è®¾è®¡
```tsx
function MobileFriendlyButton() {
  return (
    <button className="
      min-h-[44px]       // æœ€å°ç‚¹å‡»åŒºåŸŸ 44px (iOS æ ‡å‡†)
      px-4 py-3
      text-base          // ä¸å°äº 16px é¿å… iOS è‡ªåŠ¨ç¼©æ”¾
      bg-blue-500 text-white rounded-lg
      active:bg-blue-600 // æä¾›è§¦æ‘¸åé¦ˆ
      select-none        // é˜²æ­¢é•¿æŒ‰é€‰ä¸­æ–‡å­—
    ">
      ç§»åŠ¨ç«¯æŒ‰é’®
    </button>
  );
}
```

## âš ï¸ å¸¸è§é—®é¢˜ä¸è§£å†³

### é—®é¢˜1ï¼šTailwind ç±»åä¸ç”Ÿæ•ˆ
**åŸå› ï¼š** å¯èƒ½æ˜¯ç±»åè¢« PurgeCSS è¯¯åˆ 
**è§£å†³ï¼š**
```js
// tailwind.config.js
module.exports = {
  content: [
    "./src/**/*.{js,ts,jsx,tsx,mdx}",
    // ç¡®ä¿åŒ…å«æ‰€æœ‰å¯èƒ½ä½¿ç”¨ Tailwind ç±»åçš„æ–‡ä»¶
  ],
  safelist: [
    // åŠ¨æ€ç”Ÿæˆçš„ç±»åéœ€è¦åŠ å…¥å®‰å…¨åˆ—è¡¨
    'bg-red-500',
    'bg-green-500',
    /^bg-(red|green|blue)-(100|500|900)$/
  ]
}
```

### é—®é¢˜2ï¼šCSS å˜é‡åœ¨ Tailwind ä¸­ä¸å·¥ä½œ
**è§£å†³ï¼š** ä½¿ç”¨æ–¹æ‹¬å·è¯­æ³•
```tsx
// âŒ ä¸å·¥ä½œ
<div className="bg-var(--primary-color)">

// âœ… æ­£ç¡®æ–¹å¼  
<div className="bg-[var(--primary-color)]">
```

### é—®é¢˜3ï¼šæ·±è‰²æ¨¡å¼åˆ‡æ¢ä¸å¹³æ»‘
**è§£å†³ï¼š** æ·»åŠ è¿‡æ¸¡åŠ¨ç”»
```css
/* globals.css */
* {
  transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}
```

## ğŸ“ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### å‡å°‘åŒ…å¤§å°
```js
// tailwind.config.js - åªå¯ç”¨éœ€è¦çš„åŠŸèƒ½
module.exports = {
  corePlugins: {
    float: false,        // ç¦ç”¨ä¸éœ€è¦çš„æ’ä»¶
    clear: false,
    skew: false,
  }
}
```

### CSS-in-JS çš„æ€§èƒ½è€ƒé‡
```tsx
// âŒ é¿å…å†…è”æ ·å¼
<div style={{ marginTop: '20px', color: 'red' }}>

// âœ… ä½¿ç”¨ Tailwind ç±»å
<div className="mt-5 text-red-500">

// âœ… å¤æ‚æ ·å¼ä½¿ç”¨ CSS Modules
<div className={styles.complexComponent}>
```

## ğŸ’¡ æœ€ä½³å®è·µæ€»ç»“

1. **ç§»åŠ¨ä¼˜å…ˆ**ï¼šä»å°å±å¹•å¼€å§‹è®¾è®¡ï¼Œé€æ­¥å¢å¼º
2. **ä¸€è‡´æ€§**ï¼šå»ºç«‹è®¾è®¡ç³»ç»Ÿï¼Œä½¿ç”¨ç»Ÿä¸€çš„é—´è·ã€é¢œè‰²ç­‰
3. **å¯ç»´æŠ¤æ€§**ï¼šå¤§å‹é¡¹ç›®ä¸­é€‚å½“ä½¿ç”¨ `@apply` å’Œç»„ä»¶æŠ½è±¡
4. **æ€§èƒ½**ï¼šç›‘æ§ CSS åŒ…å¤§å°ï¼Œç§»é™¤æœªä½¿ç”¨çš„æ ·å¼
5. **å¯è®¿é—®æ€§**ï¼šç¡®ä¿è¶³å¤Ÿçš„å¯¹æ¯”åº¦ï¼Œåˆç†çš„å­—ä½“å¤§å°
6. **è°ƒè¯•**ï¼šä½¿ç”¨æµè§ˆå™¨å¼€å‘å·¥å…·å’Œ Tailwind IntelliSense
7. **å›¢é˜Ÿåä½œ**ï¼šç»Ÿä¸€ä»£ç é£æ ¼ï¼Œä½¿ç”¨ Prettier æ ¼å¼åŒ–